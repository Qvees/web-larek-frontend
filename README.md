# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

Данные в проекте 

Цена товара 
Название товара 
Описание товара 
Категория товаров 
Картинки товара
Оплата
Доставка
Mail
Телефон

Объекты 

Товар
Покупатель

Коллекции 

Каталог товаров 
Корзина
____________________________________________________________________________________________________________________

Компоненты (Components):

1. Component:
Базовый класс для всех компонентов.
Предоставляет основные методы работы с DOM-элементами.
2. Modal:
Компонент модального окна.
Отображает и скрывает модальное окно.
Позволяет установить содержимое модального окна.
3. Page:
Компонент страницы.
Отображает содержимое страницы, такое как каталог продуктов и корзина.
Отслеживает события, такие как открытие корзины.
4. Basket:
Компонент корзины.
Отображает содержимое корзины и ее текущее состояние.
Позволяет добавлять и удалять продукты из корзины.
5. Card:
Компонент карточки продукта.
Отображает информацию о продукте.
Позволяет пользователю взаимодействовать с продуктом (например, добавлять его в корзину).
________________________________________________________________________________
Модели (Models):

1. Model:
Базовый класс для всех моделей.
Обеспечивает управление данными и их обновление.
Сообщает о изменениях в данных.
2. ProductItem:
Модель продукта.
Содержит информацию о продукте, такую как название, описание, изображение и цена.
Отправляет события об изменениях данных.
3. AppState:
Модель состояния приложения.
Содержит информацию о каталоге продуктов, корзине, текущем предварительном просмотре и заказе.
Позволяет управлять состоянием приложения.
________________________________________________________________________________
Формы и API:

1. Form:
Компонент формы.
Предоставляет методы для работы с формами и их валидацией.
2. Order:
Форма заказа.
Предоставляет методы для установки данных заказа, таких как адрес, телефон и электронная почта.
3. ShopAPI:
Класс для взаимодействия с API магазина.
Предоставляет методы для получения информации о продуктах и оформления заказов.
________________________________________________________________________________
 Другие файлы:
events.ts: Модуль для работы с событиями и их обработки.
utils.ts: Вспомогательные утилиты и функции.
____________________________________________________________________________________________________________________

В файле index.ts в папке types определены различные интерфейсы и типы данных, которые используются в приложении. Давайте разберем каждый из них:

IProductList:
Интерфейс описывает структуру элемента списка продуктов.
Свойства:
id: Уникальный идентификатор продукта.
description: Описание продукта.
image: URL изображения продукта.
title: Название продукта.
category: Категория, к которой относится продукт.
price: Цена продукта.
error : Ошибка, если есть.

IOrderForm:
Интерфейс определяет структуру формы заказа.
Свойства:
email: Электронная почта пользователя.
phone: Номер телефона пользователя.
adress: Адрес пользователя.

IOrder:
Интерфейс описывает структуру заказа.
Расширяет интерфейс IOrderForm.
Свойства:
items: Массив идентификаторов продуктов в заказе.

IOrderResult:
Интерфейс представляет результат заказа.
Свойства:
id: Уникальный идентификатор заказа.
FormErrors:тип данных для ошибок формы.


IAppState:
Интерфейс описывает структуру глобального состояния приложения.
Свойства:
catalog: Список продуктов.
basket: Список продуктов в корзине (идентификаторы).
preview: Идентификатор выбранного продукта или null.
order: Информация о текущем заказе или null.
loading: Флаг загрузки данных.

IBasketItem:
Тип данных для элемента корзины.
Выбирает из IProductList только id, title и price.
____________________________________________________________________________________________________________________

Класс Component в файле Component.ts представляет собой базовый компонент, который используется для создания других компонентов в приложении. 

Конструктор:
Принимает один аргумент - container, который представляет собой DOM-элемент, в который будет встраиваться компонент.
Код в конструкторе выполняется до всех объявлений в дочернем классе.
Методы:

toggleClass: Переключает класс у указанного элемента.
setText: Устанавливает текстовое содержимое указанного элемента.
setDisabled: Устанавливает состояние блокировки указанного элемента.
setHidden: Скрывает указанный элемент, устанавливая ему свойство display: none.
setVisible: Показывает указанный элемент, удаляя свойство display: none.
setImage: Устанавливает изображение для указанного элемента <img> с альтернативным текстом.
element: Геттер, возвращающий корневой DOM-элемент компонента.
render: Метод для рендеринга компонента, принимает объект data с данными для обновления компонента. Обновляет компонент, применяя данные из data.

Абстрактный:
Класс Component является абстрактным, что означает, что он не может быть создан напрямую, а только наследован.
____________________________________________________________________________________________________________________

Файл Model.ts содержит базовую модель Model и функцию isModel, которая используется для проверки объекта на принадлежность к классу Model. 

Функция isModel:
isModel - это функция, которая принимает объект в качестве аргумента и возвращает булево значение, указывающее, является ли этот объект экземпляром класса Model.
Возвращает true, если объект является экземпляром Model, и false в противном случае.

Класс Model:
Model - абстрактный класс, который служит базовым для всех моделей.
Конструктор принимает два аргумента:
data: объект типа T, который инициализирует свойства модели.
events: экземпляр IEvents, используемый для управления событиями.
В конструкторе свойства модели инициализируются значениями из data с помощью Object.assign.
Метод emitChanges используется для оповещения об изменениях в модели. Он принимает имя события event и необязательный параметр payload, который содержит дополнительные данные для передачи в событие.
emitChanges вызывает метод emit экземпляра IEvents, чтобы оповестить об изменениях в модели.
____________________________________________________________________________________________________________________

basket.ts это файл, который содержит класс Basket, отвечающий за отображение корзины на веб-странице.

Интерфейс IBasketView:
Описывает структуру данных, которые используются для отображения корзины.
Включает в себя массив элементов items, общую сумму total, массив выбранных элементов selected и массив товаров в корзине itemsInBasket.

Класс Basket:
Это подкласс компонента Component, который отвечает за отображение корзины.
Класс содержит свойства для элементов DOM, таких как список товаров, общая сумма, кнопка заказа и счетчик элементов корзины.
В конструкторе класса инициализируются основные элементы DOM и устанавливаются обработчики событий для кнопок "Открыть корзину" и "Оформить заказ".
Методы set items, set selected и set total используются для установки значений для отображения элементов корзины.
Методы addItemToBasket и removeItemFromBasket добавляют и удаляют товары из корзины соответственно.
Метод renderBasketItems отвечает за отображение товаров в корзине на странице.
Метод getItemsInBasket возвращает массив товаров, находящихся в корзине.
Приватный метод updateCounter обновляет счетчик товаров в корзине.
____________________________________________________________________________________________________________________

Файл form.ts реализует класс Form, который является наследником класса Component<IFormState>.

Интерфейс IFormState:
Определяет состояние формы, включая её валидность и ошибки.
Класс Form<T>:

Form<T> - это абстрактный класс, представляющий форму.

Конструктор принимает два аргумента:
container: HTML-элемент формы.
events: экземпляр IEvents, используемый для обработки событий.
В конструкторе происходит инициализация свойств:
_submit: кнопка отправки формы.
_errors: элемент для отображения ошибок формы.

Устанавливает слушатели событий:
На событие input для отслеживания изменений в полях формы.
На событие submit для предотвращения стандартной отправки формы и генерации события submit.
Метод onInputChange вызывается при изменении значений в полях формы и генерирует соответствующее событие.
Свойства valid и errors устанавливают состояние валидации формы и отображение ошибок соответственно.
Метод render отображает состояние формы, принимая объект state, который содержит данные о валидности формы и ошибках.
Внутри render происходит вызов super.render, который вызывает метод родительского класса Component, и затем свойства класса Form обновляются значениями из inputs.


____________________________________________________________________________________________________________________
Файл modal.ts содержит реализацию класса Modal, который расширяет функциональность базового компонента Component<IModalData>.

Интерфейс IModalData:
Определяет структуру данных, необходимых для создания модального окна, включая его содержимое.
Класс Modal:

Modal представляет модальное окно.
Конструктор принимает два аргумента:
container: HTML-элемент, представляющий контейнер модального окна.
events: экземпляр IEvents, используемый для обработки событий.
В конструкторе происходит инициализация свойств:
_closeButton: кнопка закрытия модального окна.
_content: контейнер для содержимого модального окна.
Устанавливаются обработчики событий:
На кнопку закрытия модального окна.
На клики вне контента модального окна для закрытия его.
На клики внутри контента модального окна для предотвращения закрытия окна.
Свойство content позволяет устанавливать содержимое модального окна.
Метод open открывает модальное окно и генерирует событие modal:open.
Метод close закрывает модальное окно, удаляет его содержимое и генерирует событие modal:close.
Метод render вызывается для отображения модального окна с данными из объекта data.
В методе render сначала вызывается super.render(data), чтобы отобразить данные на модальном окне, затем окно открывается.
____________________________________________________________________________________________________________________


Файл appdata.ts содержит определение классов, связанных с состоянием приложения и продуктами, а также типы событий и состояний. 

Типы данных и интерфейсы:
IAppState: Описывает структуру состояния приложения, включая каталог товаров, корзину, предварительный просмотр, заказ и состояние загрузки.
IBasketItem: Описывает элемент корзины, содержащий идентификатор, название и цену товара.
IProductList: Описывает структуру товара, включая идентификатор, описание, изображение, название, категорию и цену.
IOrderForm: Описывает форму заказа, включая электронную почту, телефон и адрес.
IOrder: Расширяет IOrderForm и добавляет массив товаров в заказ.
IOrderResult: Описывает результат заказа.
FormErrors: отображение ошибок формы заказа.
События и изменения каталога:

CatalogChangeEvent: Описывает событие изменения каталога товаров.

Классы ProductItem и AppState:
ProductItem: Расширяет базовый класс Model<IProductList>. Представляет отдельный товар с его характеристиками.
AppState: Расширяет базовый класс Model<IAppState>. Представляет состояние всего приложения, включая каталог товаров, корзину, состояние загрузки, заказ и предварительный просмотр.
В конструкторе инициализируются свойства, такие как basket, catalog, loading, order, preview и formErrors.
Методы класса обеспечивают функциональность, такую как добавление и удаление товаров из корзины, расчет общей суммы заказа, установка каталога товаров, установка предварительного просмотра, управление полями заказа и валидация заказа.
Для управления изменениями в состоянии приложения используются методы emitChanges и события.
____________________________________________________________________________________________________________________


Файл card.ts определяет класс Card<T>, который представляет карточку товара в приложении.

Интерфейсы и типы данных:
ICardActions: Определяет действия, которые могут быть выполнены при взаимодействии с карточкой товара.
ICard<T>: Описывает структуру данных карточки товара, включая заголовок, описание, изображение, категорию, цену и кнопку.
Класс Card<T>:

constructor: Принимает блок-имя (название класса блока), контейнер (DOM-элемент, содержащий карточку) и действия.
В конструкторе инициализируются элементы DOM карточки, такие как заголовок, изображение, описание, категория, цена и кнопка.
Методы setTitle, setCategory, setPrice, setImage, setDescription устанавливают соответствующие значения элементам DOM карточки.
Методы getTitle, getCategory, getPrice возвращают значения соответствующих элементов DOM карточки.
Методы id возвращают и устанавливают идентификатор карточки.
Класс CatalogItem:

Расширяет класс Card<IProductList> и представляет карточку товара из каталога.
Конструктор принимает контейнер (DOM-элемент, содержащий карточку) и действия.

____________________________________________________________________________________________________________________
Файл order.ts содержит класс Order, который расширяет класс Form<IOrderForm>.
Класс Order:
Конструктор принимает контейнер формы заказа (HTMLFormElement) и объект событий (IEvents).
Методы setPhone, setEmail, setAdress устанавливают значения телефона, электронной почты и адреса в соответствующих элементах формы заказа.
В методах используется контейнер формы для доступа к элементам формы с помощью namedItem.
____________________________________________________________________________________________________________________

Файл page.ts содержит класс Page, который расширяет базовый класс Component<IPage>.

Интерфейс IPage:
Описывает структуру данных, ожидаемых для отображения на странице.
Содержит счетчик, каталог элементов и флаг блокировки.
Класс Page:

Конструктор принимает контейнер страницы (HTMLElement) и объект событий (IEvents).
Инициализирует основные элементы страницы, такие как счетчик корзины, каталог товаров и обертка страницы.
При клике на корзину (_basket) генерирует событие "bids:open".
Методы setCounter, setCatalog, setLocked:

Устанавливают значения счетчика, каталога и флага блокировки страницы соответственно.
Обновляют содержимое страницы в соответствии с переданными данными.
____________________________________________________________________________________________________________________

Файл shopapi.ts содержит класс ShopAPI, который предоставляет методы для взаимодействия с API магазина. 

Интерфейс IShopAPI:
Описывает методы, которые должны быть реализованы в классе ShopAPI.
getProductList: Получение списка продуктов.
getProductItem: Получение информации о конкретном продукте.
orderProduct: Оформление заказа.
Класс ShopAPI:

Расширяет класс Api для работы с API.
Содержит свойство cdn, представляющее URL-адрес контентного хранилища.
В конструкторе принимает cdn, базовый URL и дополнительные параметры запроса.
Метод getProductItem(id: string): Отправляет запрос на получение информации о продукте с указанным идентификатором. Обрабатывает полученные данные, добавляя URL-адрес CDN к изображению продукта.
Метод getProductList(): Отправляет запрос на получение списка продуктов. Также обрабатывает полученные данные, добавляя URL-адрес CDN к изображениям продуктов.
Метод orderProduct(order: IOrder): Отправляет запрос на оформление заказа с переданными данными. Возвращает результат заказа.
____________________________________________________________________________________________________________________

